# Multi-AZ Configuration for EC2 Instance 1 (AZ: ap-southeast-1a)
# Copy this file to .env on EC2-1

# =================================
# DATABASE CONFIGURATION - AZ1
# =================================
# PostgreSQL Master configuration
POSTGRES_MASTER_HOST=
# MongoDB Replica Set
MONGODB_CLUSTER_URI=mongodb://PRIVATE_IP_1:27017,PRIVATE_IP_2:27017/driver-db?replicaSet=rs0
# Redis Master
REDIS_MASTER_HOST=PRIVATE_IP_1
REDIS_REPLICA_OF=

# =================================
# KAFKA CONFIGURATION - AZ1
# =================================
KAFKA_BROKER_ID=1
KAFKA_ADVERTISED_HOST=PRIVATE_IP_1
KAFKA_ZOOKEEPER_CONNECT=PRIVATE_IP_1:2181,PRIVATE_IP_2:2181
KAFKA_BOOTSTRAP_SERVERS=PRIVATE_IP_1:9092,PRIVATE_IP_2:9092
KAFKA_REPLICATION_FACTOR=2
KAFKA_MIN_ISR=1

# Zookeeper
ZK_SERVER_ID=1
ZK_SERVERS=server.1=PRIVATE_IP_1:2888:3888;server.2=PRIVATE_IP_2:2888:3888

# =================================
# ELK CONFIGURATION - AZ1
# =================================
ES_NODE_NAME=es-node-1
ES_DISCOVERY_HOSTS=PRIVATE_IP_1,PRIVATE_IP_2
ES_INITIAL_MASTERS=es-node-1,es-node-2
ELASTICSEARCH_HOSTS=http://PRIVATE_IP_1:9200,http://PRIVATE_IP_2:9200

# =================================
# MICROSERVICES CONFIGURATION
# =================================
POSTGRES_CLUSTER_URL=jdbc:postgresql://PRIVATE_IP_1:5432/auth_service_db
REDIS_CLUSTER_HOST=PRIVATE_IP_1
REDIS_CLUSTER_NODES=PRIVATE_IP_1:6379,PRIVATE_IP_2:6379

# =================================
# INSTRUCTIONS FOR SETUP:
# =================================
# 1. Replace PRIVATE_IP_1 with actual private IP of EC2-1
# 2. Replace PRIVATE_IP_2 with actual private IP of EC2-2
# 3. Copy this file to .env on EC2-1
# 4. Run: docker-compose -f docker-compose-databases.yml -f docker-compose-kafka.yml -f docker-compose-elk.yml -f docker-compose-services.yml up -d